# Generated by Django 4.2.14 on 2024-08-26 15:01

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ("evaluation", "0058_phase_evaluation_time_limit_and_more"),
    ]

    operations = [
        migrations.AlterModelOptions(
            name="evaluation",
            options={
                "permissions": [("claim_evaluation", "Can claim evaluation")]
            },
        ),
        migrations.AddField(
            model_name="evaluation",
            name="claimed_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                related_name="claimed_evaluations",
                to=settings.AUTH_USER_MODEL,
            ),
        ),
        migrations.AddField(
            model_name="phase",
            name="external_evaluation",
            field=models.BooleanField(
                default=False,
                help_text="Are submissions to this phase evaluated externally? If so, it is the responsibility of the external service to claim and evaluate new submissions, download the submitted algorithm models and images and return the results.",
            ),
        ),
        migrations.AlterField(
            model_name="evaluation",
            name="method",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                to="evaluation.method",
            ),
        ),
        migrations.AlterField(
            model_name="evaluation",
            name="status",
            field=models.PositiveSmallIntegerField(
                choices=[
                    (0, "Queued"),
                    (1, "Started"),
                    (2, "Re-Queued"),
                    (3, "Failed"),
                    (4, "Succeeded"),
                    (5, "Cancelled"),
                    (6, "Provisioning"),
                    (7, "Provisioned"),
                    (8, "Executing"),
                    (9, "Executed"),
                    (10, "Parsing Outputs"),
                    (11, "Executing Algorithm"),
                    (12, "External Execution In Progress"),
                ],
                db_index=True,
                default=0,
            ),
        ),
    ]
