{% extends "base.html" %}
{% load url %}
{% load crispy_forms_tags %}
{% load static %}

{% block breadcrumbs %}
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'reader-studies:list' %}">Reader
            Studies</a></li>
        <li class="breadcrumb-item"><a href="{% url 'reader-studies:display_sets' slug=base_object.slug %}">Display Sets</a></li>
        <li class="breadcrumb-item active" aria-current="page">Update {{ object }}</li>
    </ol>
{% endblock %}

{% block title %}
    Display Set Update - {{ block.super }}
{% endblock %}

{% block content %}
    <h2>Update Display Set</h2>
    <div id="objectSlug" class="d-none" data-slug="{{ base_object.slug }}"></div>
    {% include "grandchallenge/partials/messages.html" %}
    <form hx-post="{% url 'reader-studies:display-set-update' pk=object.pk slug=object.reader_study.slug %}" method="post" hx-target="body" hx-include="[id='new-interfaces']" class="obj-form" id="obj-form">
        {% csrf_token %}
        {{ form|crispy }}
        <div id="new-interfaces"><input type="hidden"></div>
        <button type="button" id="add-new" class="btn btn-outline-primary mb-2" hx-get="{% url 'reader-studies:display-set-interfaces-create' pk=object.pk slug=base_object.slug %}" hx-target="#new-interfaces" hx-swap="beforeend">Add value for new interface</button>
        <div class="d-flex justify-content-between pb-2">
        <div>
          <a href="{% url 'reader-studies:display_sets' slug=base_object.slug %}" class="btn btn-outline-primary">Back</a>
          <button type="submit" class="btn btn-primary">Save</button>
        </div>
      </div>
    </form>
{% endblock %}

{% block script %}
    {{ block.super }}
    {{ form_media }}
    <script type="module" src="{% static 'components/js/create_extra_interfaces.mjs' %}" type="text/javascript"></script>
    <script type="module" src="{% static 'components/js/autocomplete_htmx.mjs' %}" type="text/javascript"></script>
    <script type="text/javascript" src="{% static "cases/js/ignore_enter_button.js" %}"></script>
    <link rel="stylesheet" href="{% static 'css/select2-bootstrap4-theme/select2-bootstrap4.css' %}">
{% endblock %}
