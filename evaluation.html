

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Evaluation &mdash; grand-challenge.org  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Processor specification" href="processor.html" />
    <link rel="prev" title="Development" href="development.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> grand-challenge.org
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#evaluation-container-requirements">Evaluation Container Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#input">Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="#entrypoint">Entrypoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#errors">Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#output">Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evaluation-options">Evaluation Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-grandchallenge.evaluation.templatetags.evaluation_extras">Template Tags</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="processor.html">Processor specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="workstations.html">Workstations</a></li>
<li class="toctree-l1"><a class="reference internal" href="reader-studies.html">Reader Studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design decisions</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">grand-challenge.org</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Evaluation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/evaluation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="evaluation">
<h1>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h1>
<p>grand-challenge.org has a system for automatically evaluating new submissions.
Challenge administrators upload their own Docker containers that will be
executed by Celery workers when a new submission in uploaded by a participant.</p>
<div class="section" id="evaluation-container-requirements">
<h2>Evaluation Container Requirements<a class="headerlink" href="#evaluation-container-requirements" title="Permalink to this headline">¶</a></h2>
<p>The evaluation container must contain everything that is needed to perform the
evaluation on a new submission. This includes the reference standard, and the
code that will execute the evaluation on the new submission. An instance of the
evaluation container image is created for each submission.</p>
<div class="section" id="input">
<h3>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h3>
<p>The participants submission will be extracted and mounted as a docker volume
on <cite>/input/</cite>.</p>
</div>
<div class="section" id="entrypoint">
<h3>Entrypoint<a class="headerlink" href="#entrypoint" title="Permalink to this headline">¶</a></h3>
<p>The container will be run with the default arguments, so the entrypoint must
by default produce an evaluation for the data that will reside on <cite>/input/</cite>.
The container is responsible for loading all of the data, handling incorrect
filenames, incomplete submissions, duplicate folders, etc.</p>
</div>
<div class="section" id="errors">
<h3>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h3>
<p>If there is an error in the evaluation process grand-challenge.org will parse
<cite>stderr</cite> and return the last non-empty line to the user. If your evaluation
script is in Python the best practice is to raise an exception and the message
will then be passed to the user, eg</p>
<blockquote>
<div><p>raise AttributeError(‘Expected to find 10 images, you submitted 5’)</p>
</div></blockquote>
</div>
<div class="section" id="output">
<h3>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<p>The container must produce the file <cite>/output/metrics.json</cite>. The structure
within must be valid json (ie. loadable with <cite>json.loads()</cite>) and will be stored
as a result in the database. The challenge administrator is free to define what
metrics are included. We recommend storing results in two objects - <cite>case</cite> for
the scores on individual cases (eg, scans), and <cite>aggregates</cite> for when there
is one number per evaluation. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;case&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;dicecoefficient&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="mf">0.6461774875144065</span><span class="p">,</span>
      <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="mf">0.7250400040547097</span><span class="p">,</span>
      <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="mf">0.6747092236948878</span><span class="p">,</span>
      <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="mf">0.6452332692745784</span><span class="p">,</span>
      <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="mf">0.6839602948067993</span><span class="p">,</span>
      <span class="s2">&quot;5&quot;</span><span class="p">:</span> <span class="mf">0.6817807628480707</span><span class="p">,</span>
      <span class="s2">&quot;6&quot;</span><span class="p">:</span> <span class="mf">0.4715406247268339</span><span class="p">,</span>
      <span class="s2">&quot;7&quot;</span><span class="p">:</span> <span class="mf">0.5988810496224731</span><span class="p">,</span>
      <span class="s2">&quot;8&quot;</span><span class="p">:</span> <span class="mf">0.5475856316815167</span><span class="p">,</span>
      <span class="s2">&quot;9&quot;</span><span class="p">:</span> <span class="mf">0.32923801642370615</span>
    <span class="p">},</span>
    <span class="s2">&quot;jaccardcoefficient&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="mf">0.47729852440408627</span><span class="p">,</span>
      <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="mf">0.5686766693547471</span><span class="p">,</span>
      <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="mf">0.5091027839007266</span><span class="p">,</span>
      <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="mf">0.47626890640360103</span><span class="p">,</span>
      <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="mf">0.5197109875240358</span><span class="p">,</span>
      <span class="s2">&quot;5&quot;</span><span class="p">:</span> <span class="mf">0.5171983108978807</span><span class="p">,</span>
      <span class="s2">&quot;6&quot;</span><span class="p">:</span> <span class="mf">0.30850713624139353</span><span class="p">,</span>
      <span class="s2">&quot;7&quot;</span><span class="p">:</span> <span class="mf">0.4274305543159676</span><span class="p">,</span>
      <span class="s2">&quot;8&quot;</span><span class="p">:</span> <span class="mf">0.3770174983296798</span><span class="p">,</span>
      <span class="s2">&quot;9&quot;</span><span class="p">:</span> <span class="mf">0.1970585994056237</span>
    <span class="p">},</span>
    <span class="s2">&quot;alg_fname&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.840.113704.1.111.2296.1199810886.7.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.276.0.28.3.0.14.4.0.20090213134050413.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.276.0.28.3.0.14.4.0.20090213134114792.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.840.113704.1.111.2004.1131987870.11.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.840.113704.1.111.2296.1199810941.11.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;5&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.840.113704.1.111.4400.1131982359.11.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;6&quot;</span><span class="p">:</span> <span class="s2">&quot;1.3.12.2.1107.5.1.4.50585.4.0.7023259421321855.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;7&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.000.000000.0.00.0.0000000000.0000.0000000000.000.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;8&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.392.200036.9116.2.2.2.1762676169.1080882991.2256.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;9&quot;</span><span class="p">:</span> <span class="s2">&quot;2.16.840.1.113669.632.21.3825556854.538251028.390606191418956020.mhd&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;gt_fname&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.840.113704.1.111.2296.1199810886.7.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.276.0.28.3.0.14.4.0.20090213134050413.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.276.0.28.3.0.14.4.0.20090213134114792.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.840.113704.1.111.2004.1131987870.11.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.840.113704.1.111.2296.1199810941.11.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;5&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.840.113704.1.111.4400.1131982359.11.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;6&quot;</span><span class="p">:</span> <span class="s2">&quot;1.3.12.2.1107.5.1.4.50585.4.0.7023259421321855.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;7&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.000.000000.0.00.0.0000000000.0000.0000000000.000.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;8&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.392.200036.9116.2.2.2.1762676169.1080882991.2256.mhd&quot;</span><span class="p">,</span>
      <span class="s2">&quot;9&quot;</span><span class="p">:</span> <span class="s2">&quot;2.16.840.1.113669.632.21.3825556854.538251028.390606191418956020.mhd&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;aggregates&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;dicecoefficient_mean&quot;</span><span class="p">:</span> <span class="mf">0.6004146364647982</span><span class="p">,</span>
    <span class="s2">&quot;dicecoefficient_std&quot;</span><span class="p">:</span> <span class="mf">0.12096508479974993</span><span class="p">,</span>
    <span class="s2">&quot;dicecoefficient_min&quot;</span><span class="p">:</span> <span class="mf">0.32923801642370615</span><span class="p">,</span>
    <span class="s2">&quot;dicecoefficient_max&quot;</span><span class="p">:</span> <span class="mf">0.7250400040547097</span><span class="p">,</span>
    <span class="s2">&quot;jaccardcoefficient_mean&quot;</span><span class="p">:</span> <span class="mf">0.4378269970777743</span><span class="p">,</span>
    <span class="s2">&quot;jaccardcoefficient_std&quot;</span><span class="p">:</span> <span class="mf">0.11389145837530869</span><span class="p">,</span>
    <span class="s2">&quot;jaccardcoefficient_min&quot;</span><span class="p">:</span> <span class="mf">0.1970585994056237</span><span class="p">,</span>
    <span class="s2">&quot;jaccardcoefficient_max&quot;</span><span class="p">:</span> <span class="mf">0.5686766693547471</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="evaluation-options">
<h3>Evaluation Options<a class="headerlink" href="#evaluation-options" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="grandchallenge.evaluation.models.Phase">
<em class="property">class </em><code class="sig-prename descclassname">grandchallenge.evaluation.models.</code><code class="sig-name descname">Phase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">id</span></em>, <em class="sig-param"><span class="n">created</span></em>, <em class="sig-param"><span class="n">modified</span></em>, <em class="sig-param"><span class="n">challenge</span></em>, <em class="sig-param"><span class="n">archive</span></em>, <em class="sig-param"><span class="n">title</span></em>, <em class="sig-param"><span class="n">slug</span></em>, <em class="sig-param"><span class="n">score_title</span></em>, <em class="sig-param"><span class="n">score_jsonpath</span></em>, <em class="sig-param"><span class="n">score_error_jsonpath</span></em>, <em class="sig-param"><span class="n">score_default_sort</span></em>, <em class="sig-param"><span class="n">score_decimal_places</span></em>, <em class="sig-param"><span class="n">extra_results_columns</span></em>, <em class="sig-param"><span class="n">scoring_method_choice</span></em>, <em class="sig-param"><span class="n">result_display_choice</span></em>, <em class="sig-param"><span class="n">submission_kind</span></em>, <em class="sig-param"><span class="n">allow_submission_comments</span></em>, <em class="sig-param"><span class="n">display_submission_comments</span></em>, <em class="sig-param"><span class="n">supplementary_file_choice</span></em>, <em class="sig-param"><span class="n">supplementary_file_label</span></em>, <em class="sig-param"><span class="n">supplementary_file_help_text</span></em>, <em class="sig-param"><span class="n">show_supplementary_file_link</span></em>, <em class="sig-param"><span class="n">publication_url_choice</span></em>, <em class="sig-param"><span class="n">show_publication_url</span></em>, <em class="sig-param"><span class="n">daily_submission_limit</span></em>, <em class="sig-param"><span class="n">submissions_open</span></em>, <em class="sig-param"><span class="n">submissions_close</span></em>, <em class="sig-param"><span class="n">submission_page_html</span></em>, <em class="sig-param"><span class="n">auto_publish_new_results</span></em>, <em class="sig-param"><span class="n">display_all_metrics</span></em>, <em class="sig-param"><span class="n">evaluation_detail_observable_url</span></em>, <em class="sig-param"><span class="n">evaluation_comparison_observable_url</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/grandchallenge/evaluation/models.html#Phase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#grandchallenge.evaluation.models.Phase" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py exception">
<dt id="grandchallenge.evaluation.models.Phase.DoesNotExist">
<em class="property">exception </em><code class="sig-name descname">DoesNotExist</code><a class="headerlink" href="#grandchallenge.evaluation.models.Phase.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py exception">
<dt id="grandchallenge.evaluation.models.Phase.MultipleObjectsReturned">
<em class="property">exception </em><code class="sig-name descname">MultipleObjectsReturned</code><a class="headerlink" href="#grandchallenge.evaluation.models.Phase.MultipleObjectsReturned" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="grandchallenge.evaluation.models.Phase.SubmissionKind">
<em class="property">class </em><code class="sig-name descname">SubmissionKind</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/grandchallenge/evaluation/models.html#Phase.SubmissionKind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#grandchallenge.evaluation.models.Phase.SubmissionKind" title="Permalink to this definition">¶</a></dt>
<dd><p>An enumeration.</p>
</dd></dl>

<dl class="py method">
<dt id="grandchallenge.evaluation.models.Phase.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/grandchallenge/evaluation/models.html#Phase.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#grandchallenge.evaluation.models.Phase.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The ‘force_insert’ and ‘force_update’ parameters can be used to insist
that the “save” must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-grandchallenge.evaluation.templatetags.evaluation_extras">
<span id="template-tags"></span><h2>Template Tags<a class="headerlink" href="#module-grandchallenge.evaluation.templatetags.evaluation_extras" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="grandchallenge.evaluation.templatetags.evaluation_extras.get_jsonpath">
<code class="sig-prename descclassname">grandchallenge.evaluation.templatetags.evaluation_extras.</code><code class="sig-name descname">get_jsonpath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">jsonpath</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/grandchallenge/evaluation/templatetags/evaluation_extras.html#get_jsonpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#grandchallenge.evaluation.templatetags.evaluation_extras.get_jsonpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a value from a dictionary based on a jsonpath. It will only return
one result, and if a key does not exist it will return an empty string as
template tags should not raise errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>) – The dictionary to query</p></li>
<li><p><strong>jsonpath</strong> – The path to the object (singular)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The most relevant object in the dictionary</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="processor.html" class="btn btn-neutral float-right" title="Processor specification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="development.html" class="btn btn-neutral float-left" title="Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018, James Meakin

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>