{% load url %}
{% load meta_attr %}
{% load static %}
{% load pictures %}

<div class="row equal-height mx-n2">
    {% for object in page_obj %}
        {# Keep the logo width in sync with the column breakpoints #}
        <div class="col-12 col-sm-6 col-md-3 mb-3 px-2">
            <div class="card gc-card">
                <a class="stretched-link" href="{{ object.get_absolute_url }}"
                   title="View {{ object|meta_attr:'verbose_name'|title }}"></a>
                <div class="embed-responsive embed-responsive-1by1">
                    {% if object.logo %}
                        {% picture object.logo img_class="card-img-top embed-responsive-item" img_loading="lazy" img_alt="Item Logo" ratio="1/1" s=6 m=3 %}
                    {% else %}
                        <img class="card-img-top embed-responsive-item"
                             loading="lazy"
                             alt="Item Logo"
                             src="{% static 'images/3697E1-0.8.png' %}"
                        >
                    {% endif %}
                </div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title {% if 'challenge' in object|meta_attr:'model_name' %}text-truncate{% endif %} mb-0">
                        {% if 'challenge' in object|meta_attr:'model_name' %}
                            {% firstof object.title object.short_name %}
                        {% else %}
                            {{ object.title }}
                        {% endif %}
                        {% if not object.public %}
                            <i class="fas fa-lock fa-sm above-stretched-link mx-1" title="{{ object_list.model|meta_attr:'verbose_name'|title }} is private"></i>
                        {% endif %}
                    </h5>
                    {% if 'algorithm' in object|meta_attr:'model_name' %}
                        {% include 'algorithms/algorithm_card_body.html' with algorithm=object %}
                    {% elif 'challenge' in object|meta_attr:'model_name' %}
                        {% include 'challenges/challenge_card_body.html' with challenge=object %}
                    {% else %}
                        <p class="card-text">{{ object.description }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>
