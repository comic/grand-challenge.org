COMIC Django Frontend
=====================

.. image:: https://travis-ci.org/comic/comic-django.svg?branch=master
    :target: https://travis-ci.org/comic/comic-django

This repository contains the Django-based web frontend for the COMIC project.  "COMIC" stands for *Consortium for Open Medical Image Computing*.

.. _installation:

Installation
------------

You can fetch a copy by cloning the git repository::

    git clone git://github.com/comic/comic-django.git

You can then install the requirements into your python environment with::

    pip install -r requirements.txt

Alternatively, you can use the provided vagrantfile which will set up a complete Ubuntu 16 environment, install comic, and run the tests. Simply invoke::

    vagrant up

Testing
-------

You can run the tests by invoking::

    python django/manage.py test comicsite


Getting the framework up and running
------------------------------------

After cloning the git repository and installing the required packages, take these steps to get an instance 
of the framework up and running:

From ``./django/`` you run::

    python manage.py syncdb

Warning::

    Fill in ``no`` when asked to create a superuser. We will do this later on.

After this is finished run::

    python manage.py migrate

Now we can create the superuser::

    python manage.py createsuperuser

Run the following to check if all permissions are correct::

    python manage.py check_permissions

When you start the server you should have a running copy of the COMIC web framework::

    python manage.py runserver

Finally login to the admin on ``localhost:8000/admin`` and go to ``Sites``. Change ``example.com`` into::

    Domain name: localhost:8000
    Display name: localhost


Editing settings
----------------
All default configuration is set in ./comic/settings/00_default.conf
To add your own configuration, create a file ./comic/settings/01_localsettings.conf. Any settings
defined here will overwrite settings in the 00_default.conf file. 

Some settings you might want to change::

EMAIL_BACKEND:
	By default, any emails generated by the framework are not sent but printed to the console only. 
	To send actual emails, set EMAIL_BACKEND

MAIN_HOST_NAME:
	 If you use a hostname different from the initial "http://localhost" to call the framework, 
	 change the MAIN_HOST_NAME and ALLOWED_HOSTS settings

DATABASE:
	By default all website content is stored using sqlite, which writes a file in the frameworks' root.
	To use your own database 
	
DROPBOX_ROOT:
	Each project on the framework can reference files like images, stylesheets and downloadble datasets.
	These files are looked for in this location.
	     


Useful URLs
-----------
Here is a short list of urls which are useful to know:

- /admin # The admin of the framework, you can login in here with your superuser account.
- /accounts # Overview of all accounts
- /accounts/signin # Signin to an account
- /accounts/signup # Register an account
- /accounts/singout # Signout the current user

Troubleshooting
----------------
Pip does not install matplotlib correctly::
	You can try an installer from the matplotlib website: http://matplotlib.org/downloads.html. After running the installer, you need to install the pyparsing module using
		pip install pyparsing 
