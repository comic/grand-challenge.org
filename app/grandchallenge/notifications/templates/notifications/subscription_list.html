{% extends "base.html" %}
{% load profiles %}
{% load humanize %}

{% block title %}Subscriptions - {{ block.super }}{% endblock %}

{% block breadcrumbs %}
    <ol class="breadcrumb">
        <li class="breadcrumb-item active"><a href="{% url 'notifications:list' %}">Notifications</a></li>
        <li class="breadcrumb-item active" aria-current="page">Subscriptions</li>
    </ol>
{% endblock %}

{% block content %}
    <h2>Your subscriptions</h2>
    <br>
    <h4>Forums you follow</h4>
    <ul class="list-group list-group-flush ml-4">
        {% for forum in followed_forums %}
            <li class="list-group-item p-0">
                <div class="d-flex justify-content-between">
                    <div class="pt-3 pl-0">
                        <a href="{{ forum.follow_object.get_absolute_url }}">{{ forum.follow_object }}</a>
                    </div>
                    <div  class="d-inline-flex p-2">
                        <form method="post" action="{% url 'notifications:subscription-delete' pk=forum.follow_object.id %}">
                            {% csrf_token %}
                            <input name="subscription_object" type="hidden" value="{{ forum.id }}">
                            <input name="user" type="hidden" value="{{ forum.user.id }}">
                            <button type="submit" class="btn btn-xs btn-primary mx-1">
                                Unsubscribe
                            </button>
                        </form>
                    </div>
                </div>
            </li>
        {% empty %}
            <li class="list-group-item">You are not subscribed to any forums.</li>
        {% endfor %}
    </ul>
    <br>
    <h4>Topics you follow</h4>
    <ul class="list-group list-group-flush ml-4">
        {% for topic in followed_topics %}
            <li class="list-group-item p-0">
                 <div class="d-flex justify-content-between">
                     <div class="pt-3 pl-0">
                        <a href="{{ topic.follow_object.get_absolute_url }}">{{ topic.follow_object }}</a>
                     </div>
                      <div  class="d-inline-flex p-2">
                        <form method="post" action="{% url 'notifications:subscription-delete' pk=topic.follow_object.id %}">
                            {% csrf_token %}
                            <input name="subscription_object" type="hidden" value="{{ topic.id }}">
                            <input name="user" type="hidden" value="{{ topic.user.id }}">
                            <button type="submit" class="btn btn-xs btn-primary mx-1">
                                Unsubscribe
                            </button>
                        </form>
                      </div>
                 </div>
            </li>
        {% empty %}
            <li class="list-group-item">You are not subscribed to any topics.</li>
        {% endfor %}
    </ul>
    <br>
{% endblock %}
