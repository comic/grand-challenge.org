{% extends "base.html" %}
{% load profiles %}
{% load humanize %}

{% block title %}Notifications - {{ block.super }}{% endblock %}

{% block breadcrumbs %}
    <ol class="breadcrumb">
        <li class="breadcrumb-item active" aria-current="page">Notifications</li>
    </ol>
{% endblock %}

{% block content %}
    <h2>Notifications</h2>

    <ul class="list-group">
        {% for object in object_list %}
            <li class="list-group-item {% if object.data.context_class %}list-group-item-{{ object.data.context_class }}{% endif %}">
                {% if notifications_last_read_at is None or notifications_last_read_at < object.action.timestamp %}
                    <span class="text-primary align-middle mr-2"><i class="fa fa-circle"></i></span>
                {% endif %}
                {{ object.action.actor|user_profile_link }}{{ object.action.verb }}
                {% if object.action.action_object %}
                    <a href="{{ object.action.action_object.get_absolute_url }}">{{ object.action.action_object }}</a>
                    {% if object.action.target %}
                        in
                    {% endif %}
                {% endif %}
                {% if object.action.target %}
                    <a href="{{ object.action.target.get_absolute_url }}">{{ object.action.target }}</a>
                {% endif %}
                {{ object.action.timestamp|naturaltime }}
            </li>
            {% empty %}
            <li class="list-group-item">You have no notifications</li>
        {% endfor %}
    </ul>
{% endblock %}
