# Generated by Django 4.2.16 on 2024-11-21 15:50

from django.db import migrations, models

import grandchallenge.core.validators
import grandchallenge.evaluation.models


class Migration(migrations.Migration):
    dependencies = [
        (
            "evaluation",
            "0069_phase_maximum_settable_memory_gb_evaluation_and_more",
        ),
    ]

    operations = [
        migrations.AddField(
            model_name="phase",
            name="algorithm_maximum_settable_memory_gb",
            field=models.PositiveSmallIntegerField(
                default=32,
                help_text="Maximum amount of memory that participants will be allowed to assign to algorithm inference jobs for submission. The setting on the algorithm will be validated against this on submission.",
            ),
        ),
        migrations.AddField(
            model_name="phase",
            name="algorithm_selectable_gpu_type_choices",
            field=models.JSONField(
                default=grandchallenge.evaluation.models.get_default_gpu_type_choices,
                help_text='The GPU type choices that participants will be able to select for their algorithm inference jobs. The setting on the algorithm will be validated against this on submission. Options are ["", "A100", "A10G", "V100", "K80", "T4"].',
                validators=[
                    grandchallenge.core.validators.JSONValidator(
                        schema={
                            "$schema": "http://json-schema.org/draft-07/schema",
                            "items": {
                                "enum": [
                                    "",
                                    "A100",
                                    "A10G",
                                    "V100",
                                    "K80",
                                    "T4",
                                ],
                                "type": "string",
                            },
                            "title": "The Selectable GPU Types Schema",
                            "type": "array",
                            "uniqueItems": True,
                        }
                    )
                ],
            ),
        ),
    ]
