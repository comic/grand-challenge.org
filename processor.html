

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Processor specification &mdash; grand-challenge.org  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Workstations" href="workstations.html" />
    <link rel="prev" title="Evaluation" href="evaluation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> grand-challenge.org
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Evaluation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Processor specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-processor">What is a processor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#processor-inputs">Processor Inputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#metaio-mhd-mha-files">MetaIO MHD/MHA files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-files">Other files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#execution">Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#processor-outputs">Processor Outputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#results-json">results.json</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#result-object-sections">Result object sections</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#runtime-requirements">Runtime requirements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workstations.html">Workstations</a></li>
<li class="toctree-l1"><a class="reference internal" href="reader-studies.html">Reader Studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design decisions</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">grand-challenge.org</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Processor specification</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/processor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="processor-specification">
<h1>Processor specification<a class="headerlink" href="#processor-specification" title="Permalink to this headline">¶</a></h1>
<p><em>Version 1.0.1 - Date: 2019-03-29</em></p>
<p><strong>Terms and definitions</strong></p>
<p>This documents follows the definitions for keywords layed out in <a class="reference external" href="http://www.faqs.org/rfcs/rfc2119.html">RFC 2119</a>.</p>
<div class="section" id="what-is-a-processor">
<h2>What is a processor?<a class="headerlink" href="#what-is-a-processor" title="Permalink to this headline">¶</a></h2>
<p>A processor is a single or group of algorithms packaged in a docker container that can be applied to a set of files and produces some sort of output.</p>
<p>The processor container can be uploaded to the <a class="reference external" href="https://grand-challenge.org/algorithms">algorithms page</a>. Then, it will be possible to upload some input files and the algorithm will be run on those files and produce an output.</p>
</div>
<div class="section" id="processor-inputs">
<h2>Processor Inputs<a class="headerlink" href="#processor-inputs" title="Permalink to this headline">¶</a></h2>
<p>Inputs to an algorithm are made a available to the processor in the directory <code class="docutils literal notranslate"><span class="pre">/input</span></code>.  Valid inputs to an algorithm are files containing:</p>
<ul class="simple">
<li><p>MetaIO MHD/MHA files with accompanying zraw or raw files</p></li>
<li><p>TIFF Images</p></li>
</ul>
<p>The processor specification must describe which formats are supported.</p>
<div class="section" id="metaio-mhd-mha-files">
<h3>MetaIO MHD/MHA files<a class="headerlink" href="#metaio-mhd-mha-files" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://itk.org/Wiki/ITK/MetaIO/Documentation">MetaIO image files</a> can be placed at any location of the <code class="docutils literal notranslate"><span class="pre">/input</span></code> directory. Accepted MetaIO image formats are mhd+raw, mhd+zraw, or mha files. MetaIO files in subdirectories may be ignored by processors. mhd and mha files must use the corresponding file extension to disambiguate between the two file formats.</p>
</div>
<div class="section" id="other-files">
<h3>Other files<a class="headerlink" href="#other-files" title="Permalink to this headline">¶</a></h3>
<p>Processors must be resilient with regards to extra files found in the <code class="docutils literal notranslate"><span class="pre">/input</span></code> directory. Any file that does not follow the specifications laid out above should be ignored by a processor. However, algorithms may specify in their documentation that additional “other files” are required for correct functioning of an algorithm. These additional files must be specified in the processor documentation.</p>
</div>
</div>
<div class="section" id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h2>
<p>A processor is a program that runs as main executable inside a Linux-based docker container implemented in any language. The algorithm must terminate by itself when it has finished processing data from the <code class="docutils literal notranslate"><span class="pre">/input</span></code> directory.</p>
<p>If an algorithm fails to process any items from the <code class="docutils literal notranslate"><span class="pre">/input</span></code> directory, it must terminate with and exitcode != 0. The algorithm should use stdout and stderr streams to explain the failure state. The contents of the <code class="docutils literal notranslate"><span class="pre">/output</span></code> directory shall be considered to be invalid in such a case. In all other cases, the algorithm must produce a valid <code class="docutils literal notranslate"><span class="pre">/output/results.json</span></code> file and finish with errorcode == 0.</p>
<p>If the algorithm fails to process some items from the <code class="docutils literal notranslate"><span class="pre">/input</span></code> directory, it must produce error messages for the given set of inputs as part of the results.json file that is described in the next section. Successful processing of input items must produce results that are written into the results.json for the given input items.</p>
</div>
<div class="section" id="processor-outputs">
<h2>Processor Outputs<a class="headerlink" href="#processor-outputs" title="Permalink to this headline">¶</a></h2>
<p>Outputs of an algorithm must be stored in the directory <code class="docutils literal notranslate"><span class="pre">/output/</span></code>. The output directory must consists of:</p>
<ul>
<li><p>A JSON file that contains the calculated results: <code class="docutils literal notranslate"><span class="pre">/output/results.json</span></code></p></li>
<li><p>Optional: Image files at user specified locations in the <code class="docutils literal notranslate"><span class="pre">/output/images/</span></code> directory.</p>
<blockquote>
<div><ul class="simple">
<li><p>Images must be saved using MetaIO mha or mhd files (either using compressed zraw or uncompressed raw binary blobs).</p></li>
<li><p>All images should be referred to in the <code class="docutils literal notranslate"><span class="pre">results.json</span></code> file. Images are referred to by adding a string-value in the <code class="docutils literal notranslate"><span class="pre">metrics</span></code> section denoting the relative path from the <code class="docutils literal notranslate"><span class="pre">results.json</span></code> to the image mhd or mha file. The semantics of the image are algorithm specific, meaning that images can contain any type information an algorithm author wants to store. Paths to image files should be prefixed with <code class="docutils literal notranslate"><span class="pre">filepath:</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="section" id="results-json">
<h3>results.json<a class="headerlink" href="#results-json" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">results.json</span></code> file must be a json file that contains a single array of <em>result objects</em>. Each input image results in one <em>result object</em>. A <em>result object</em> is a json-object that must contain computed algorithm results, references to related input files, and, in case a result cannot be computed, error messages explaining why the result cannot be computed. To encode these information, the result object for a given input item must use the following three keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">entity</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metrics</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error_messages</span></code></p></li>
</ul>
<div class="section" id="result-object-sections">
<h4>Result object sections<a class="headerlink" href="#result-object-sections" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">entity</span></code>: This section links a result to a set of input files that were found in the input directory.</p>
<ul class="simple">
<li><p>Add suggestions for simple filename references</p></li>
<li><p>Any json structure</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">metrics</span></code>: The metrics section contains algorithm results. The results may be stored using any json structure, but the structure must be specified by the processor documentation. Also, all external files (except for <code class="docutils literal notranslate"><span class="pre">results.json</span></code> and <code class="docutils literal notranslate"><span class="pre">types.json</span></code>) must be listed in this section. Filepaths referring to external files should thereby be prefixed with the string <code class="docutils literal notranslate"><span class="pre">filepath:</span></code>. Unlisted external files may be ignored by frameworks running processors and not be copied to a persistent data store.</p>
<p><code class="docutils literal notranslate"><span class="pre">error_messages</span></code>: A json list of human-readable strings denoting algorithm failures. If processor execution for a given set of input files was successful (see entity), this list must be empty. If the processing failed for a given set of inputs, at least one human readable error message denoting the failure state must be added to this list. In this case, the metrics section may be set to null or, if the metrics section is not set to null while errors are listed, it must be assumed that the metrics section is incomplete.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;entity&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;metrics&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
    <span class="s2">&quot;error_messages&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="o">...</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="runtime-requirements">
<h2>Runtime requirements<a class="headerlink" href="#runtime-requirements" title="Permalink to this headline">¶</a></h2>
<p>Algorithms require system resources to run. The amount and type of system resources required to run a processor should be specified as <a class="reference external" href="https://docs.docker.com/engine/reference/builder/#label">docker labels</a>. The following docker container labels should be used for specifying the required system resources are required to run a processor.</p>
<p><strong>Docker container labels</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 9%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Label</p></th>
<th class="head"><p>Values</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>processor.cpus</p></td>
<td><p>Integer &gt;= 1,
Default: 1</p></td>
<td><p>The number of cpus the processor requires to finish computation in a reasonable amount of time</p></td>
</tr>
<tr class="row-odd"><td><p>processor.cpu.capabilities</p></td>
<td><p>null or Stringlist</p></td>
<td><p>An optional list of processor capabilities that the used CPU must support to successfully run the processor. Can be an arbitrary list of flags, but at the moment of writing the following flags are supported: <code class="docutils literal notranslate"><span class="pre">avx</span></code>, <code class="docutils literal notranslate"><span class="pre">sse1</span></code>, <code class="docutils literal notranslate"><span class="pre">see2</span></code>, <code class="docutils literal notranslate"><span class="pre">sse3</span></code>, <code class="docutils literal notranslate"><span class="pre">sse4_1</span></code>, <code class="docutils literal notranslate"><span class="pre">sse4_2</span></code>, <code class="docutils literal notranslate"><span class="pre">mmx</span></code></p></td>
</tr>
<tr class="row-even"><td><p>processor.memory</p></td>
<td><p>Size &gt; 0,
Default: 1G</p></td>
<td><p>The amount of memory to assign to the processor. This is the minimum amount of memory required with which the processor will successfully run.</p></td>
</tr>
<tr class="row-odd"><td><p>processor.gpu_count</p></td>
<td><p>Integer &gt;= 0
Default: 0</p></td>
<td><p>The number of CUDA-capable GPUs that are required to run the processor.</p></td>
</tr>
<tr class="row-even"><td><p>processor.gpu.compute_capability</p></td>
<td><p>null or Version,
Default: null</p></td>
<td><p>Allows characterizing the required gpus in terms of supported <a class="reference external" href="https://developer.nvidia.com/cuda-gpus">CUDA compute capabilities</a>. If specified, it must be a valid compute capability version.</p></td>
</tr>
<tr class="row-odd"><td><p>processor.gpu.memory</p></td>
<td><p>null or Size,
Default: null</p></td>
<td><p>The amount of gpu memory that must available on the type of graphics card that is made available to the container.</p></td>
</tr>
</tbody>
</table>
<p><strong>Value type descriptions</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 3%" />
<col style="width: 97%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>null</p></td>
<td><p>The string “null” (case insensitive). Represents none/nothing.</p></td>
</tr>
<tr class="row-odd"><td><p>Integer</p></td>
<td><p>A whole number - no size limit. Valid examples:</p>
<p><code class="docutils literal notranslate"><span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">20222</span></code>, <code class="docutils literal notranslate"><span class="pre">4e1000</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p>Size</p></td>
<td><p>A size string. A size string consists of a positive Integer value combined with an optional size-character. Examples:</p>
<p><code class="docutils literal notranslate"><span class="pre">1000</span></code>, <code class="docutils literal notranslate"><span class="pre">5k</span></code>, <code class="docutils literal notranslate"><span class="pre">10G</span></code>, <code class="docutils literal notranslate"><span class="pre">100P</span></code></p>
<p>The size characters represent 1000-based unit prefixes for the unit “bytes”. Size characters are case insensitive and the following associations are defined:</p>
<p>k = kilo = 1000,</p>
<p>g = giga = 1000<sup>3</sup>,</p>
<p>t = tera = 1000<sup>4</sup>,</p>
<p>p = peta = 1000<sup>5</sup>,</p>
<p>e = exa = 1000<sup>6</sup></p>
</td>
</tr>
<tr class="row-odd"><td><p>Version</p></td>
<td><p>A version represents a version string. A version must start with at least one positive integer value. An arbitrary number of “.”-separated additional positive integer values can follow. Examples:</p>
<p><code class="docutils literal notranslate"><span class="pre">3</span></code>, <code class="docutils literal notranslate"><span class="pre">3.2</span></code>, <code class="docutils literal notranslate"><span class="pre">0.0</span></code>, <code class="docutils literal notranslate"><span class="pre">3.0.0.0</span></code>, <code class="docutils literal notranslate"><span class="pre">0.1.0</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p>Stringlist</p></td>
<td><p>A comma-separated list of arbitrary strings. Strings cannot contain commas themselves: Example:</p>
<p><code class="docutils literal notranslate"><span class="pre">one,two,third</span> <span class="pre">string,four</span></code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="workstations.html" class="btn btn-neutral float-right" title="Workstations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="evaluation.html" class="btn btn-neutral float-left" title="Evaluation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018, James Meakin

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>